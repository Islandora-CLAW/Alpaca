<?xml version="1.0" encoding="UTF-8"?>
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="
       http://www.osgi.org/xmlns/blueprint/v1.0.0 http://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd
       http://camel.apache.org/schema/blueprint http://camel.apache.org/schema/blueprint/camel-blueprint.xsd">

  <!-- reference the shared http server -->
  <reference id="sharedNettyHttpServer" interface="org.apache.camel.component.netty.http.NettySharedHttpServer"/>

  <camelContext xmlns="http://camel.apache.org/schema/blueprint">
    <restConfiguration component="netty-http" contextPath="/derp" bindingMode="off">
      <endpointProperty key="nettySharedHttpServer" value="#sharedNettyHttpServer"/>
    </restConfiguration>

    <!-- defines the rest services using the context-path /user -->
    <rest>
      <description>User rest service</description>

      <get uri="/">
        <description>Find user by id</description>
        <to uri="direct:testGet"/>
      </get>

    </rest>

    <route>
        <from uri="direct:testGet"/>
        <transform><constant>Hello MOTO</constant></transform>
    </route>
  </camelContext>

</blueprint>
