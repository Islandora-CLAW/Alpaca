<?xml version="1.0" encoding="UTF-8"?>

<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="
           http://www.osgi.org/xmlns/blueprint/v1.0.0 http://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd">

  <routeContext id="get" xmlns="http://camel.apache.org/schema/blueprint">

    <route id="getBasicImage">
      <description>Creates a basic image in Fedora using Drupal data</description>
      <from uri="direct:getBasicImage"/>
        <log message="HEADERS: ${headers}"/>
        <log message="BODY: ${body}"/>
        <transform><constant>DERP</constant></transform>
    </route>

    <route id="createBasicImage">
      <description>Creates a basic image in Fedora using Drupal data</description>
      <from uri="direct:createBasicImage"/>
        <log message="HEADERS: ${headers}"/>
        <transform>
          <javaScript>
            request.hasAttachments(); 
          </javaScript>
        </transform>
        <log message="BODY: ${body}"/>
    </route>

    <route id="updateBasicImage">
      <description>Updates a basic image in Fedora using Drupal data</description>
      <from uri="direct:updateBasicImage"/>
        <log message="HEADERS: ${headers}"/>
        <to uri="bean:multipartDecoder"/>
        <log message="JUST THE NODE: ${body}"/>
    </route>
  </routeContext>

</blueprint>
